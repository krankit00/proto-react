{"ast":null,"code":"jQuery(document).ready(function ($) {\n  var timelines = $('.cd-horizontal-timeline'),\n      eventsMinDistance = 60;\n  timelines.length > 0 && initTimeline(timelines);\n\n  function initTimeline(timelines) {\n    timelines.each(function () {\n      var timeline = $(this),\n          timelineComponents = {}; //cache timeline components \n\n      timelineComponents['timelineWrapper'] = timeline.find('.events-wrapper');\n      timelineComponents['eventsWrapper'] = timelineComponents['timelineWrapper'].children('.events');\n      timelineComponents['fillingLine'] = timelineComponents['eventsWrapper'].children('.filling-line');\n      timelineComponents['timelineEvents'] = timelineComponents['eventsWrapper'].find('a');\n      timelineComponents['timelineDates'] = parseDate(timelineComponents['timelineEvents']);\n      timelineComponents['eventsMinLapse'] = minLapse(timelineComponents['timelineDates']);\n      timelineComponents['timelineNavigation'] = timeline.find('.cd-timeline-navigation');\n      timelineComponents['eventsContent'] = timeline.children('.events-content'); //assign a left postion to the single events along the timeline\n\n      setDatePosition(timelineComponents, eventsMinDistance); //assign a width to the timeline\n\n      var timelineTotWidth = setTimelineWidth(timelineComponents, eventsMinDistance); //the timeline has been initialize - show it\n\n      timeline.addClass('loaded'); //detect click on the next arrow\n\n      timelineComponents['timelineNavigation'].on('click', '.next', function (event) {\n        event.preventDefault();\n        updateSlide(timelineComponents, timelineTotWidth, 'next');\n      }); //detect click on the prev arrow\n\n      timelineComponents['timelineNavigation'].on('click', '.prev', function (event) {\n        event.preventDefault();\n        updateSlide(timelineComponents, timelineTotWidth, 'prev');\n      }); //detect click on the a single event - show new event content\n\n      timelineComponents['eventsWrapper'].on('click', 'a', function (event) {\n        event.preventDefault();\n        timelineComponents['timelineEvents'].removeClass('selected');\n        $(this).addClass('selected');\n        updateOlderEvents($(this));\n        updateFilling($(this), timelineComponents['fillingLine'], timelineTotWidth);\n        updateVisibleContent($(this), timelineComponents['eventsContent']);\n      }); //on swipe, show next/prev event content\n\n      timelineComponents['eventsContent'].on('swipeleft', function () {\n        var mq = checkMQ();\n        mq == 'mobile' && showNewContent(timelineComponents, timelineTotWidth, 'next');\n      });\n      timelineComponents['eventsContent'].on('swiperight', function () {\n        var mq = checkMQ();\n        mq == 'mobile' && showNewContent(timelineComponents, timelineTotWidth, 'prev');\n      }); //keyboard navigation\n\n      $(document).keyup(function (event) {\n        if (event.which == '37' && elementInViewport(timeline.get(0))) {\n          showNewContent(timelineComponents, timelineTotWidth, 'prev');\n        } else if (event.which == '39' && elementInViewport(timeline.get(0))) {\n          showNewContent(timelineComponents, timelineTotWidth, 'next');\n        }\n      });\n    });\n  }\n\n  function updateSlide(timelineComponents, timelineTotWidth, string) {\n    //retrieve translateX value of timelineComponents['eventsWrapper']\n    var translateValue = getTranslateValue(timelineComponents['eventsWrapper']),\n        wrapperWidth = Number(timelineComponents['timelineWrapper'].css('width').replace('px', '')); //translate the timeline to the left('next')/right('prev') \n\n    string == 'next' ? translateTimeline(timelineComponents, translateValue - wrapperWidth + eventsMinDistance, wrapperWidth - timelineTotWidth) : translateTimeline(timelineComponents, translateValue + wrapperWidth - eventsMinDistance);\n  }\n\n  function showNewContent(timelineComponents, timelineTotWidth, string) {\n    //go from one event to the next/previous one\n    var visibleContent = timelineComponents['eventsContent'].find('.selected'),\n        newContent = string == 'next' ? visibleContent.next() : visibleContent.prev();\n\n    if (newContent.length > 0) {\n      //if there's a next/prev event - show it\n      var selectedDate = timelineComponents['eventsWrapper'].find('.selected'),\n          newEvent = string == 'next' ? selectedDate.parent('li').next('li').children('a') : selectedDate.parent('li').prev('li').children('a');\n      updateFilling(newEvent, timelineComponents['fillingLine'], timelineTotWidth);\n      updateVisibleContent(newEvent, timelineComponents['eventsContent']);\n      newEvent.addClass('selected');\n      selectedDate.removeClass('selected');\n      updateOlderEvents(newEvent);\n      updateTimelinePosition(string, newEvent, timelineComponents, timelineTotWidth);\n    }\n  }\n\n  function updateTimelinePosition(string, event, timelineComponents, timelineTotWidth) {\n    //translate timeline to the left/right according to the position of the selected event\n    var eventStyle = window.getComputedStyle(event.get(0), null),\n        eventLeft = Number(eventStyle.getPropertyValue(\"left\").replace('px', '')),\n        timelineWidth = Number(timelineComponents['timelineWrapper'].css('width').replace('px', '')),\n        timelineTotWidth = Number(timelineComponents['eventsWrapper'].css('width').replace('px', ''));\n    var timelineTranslate = getTranslateValue(timelineComponents['eventsWrapper']);\n\n    if (string == 'next' && eventLeft > timelineWidth - timelineTranslate || string == 'prev' && eventLeft < -timelineTranslate) {\n      translateTimeline(timelineComponents, -eventLeft + timelineWidth / 2, timelineWidth - timelineTotWidth);\n    }\n  }\n\n  function translateTimeline(timelineComponents, value, totWidth) {\n    var eventsWrapper = timelineComponents['eventsWrapper'].get(0);\n    value = value > 0 ? 0 : value; //only negative translate value\n\n    value = !(typeof totWidth === 'undefined') && value < totWidth ? totWidth : value; //do not translate more than timeline width\n\n    setTransformValue(eventsWrapper, 'translateX', value + 'px'); //update navigation arrows visibility\n\n    value == 0 ? timelineComponents['timelineNavigation'].find('.prev').addClass('inactive') : timelineComponents['timelineNavigation'].find('.prev').removeClass('inactive');\n    value == totWidth ? timelineComponents['timelineNavigation'].find('.next').addClass('inactive') : timelineComponents['timelineNavigation'].find('.next').removeClass('inactive');\n  }\n\n  function updateFilling(selectedEvent, filling, totWidth) {\n    //change .filling-line length according to the selected event\n    var eventStyle = window.getComputedStyle(selectedEvent.get(0), null),\n        eventLeft = eventStyle.getPropertyValue(\"left\"),\n        eventWidth = eventStyle.getPropertyValue(\"width\");\n    eventLeft = Number(eventLeft.replace('px', '')) + Number(eventWidth.replace('px', '')) / 2;\n    var scaleValue = eventLeft / totWidth;\n    setTransformValue(filling.get(0), 'scaleX', scaleValue);\n  }\n\n  function setDatePosition(timelineComponents, min) {\n    for (i = 0; i < timelineComponents['timelineDates'].length; i++) {\n      var distance = daydiff(timelineComponents['timelineDates'][0], timelineComponents['timelineDates'][i]),\n          distanceNorm = Math.round(distance / timelineComponents['eventsMinLapse']) + 2;\n      timelineComponents['timelineEvents'].eq(i).css('left', distanceNorm * min + 'px');\n    }\n  }\n\n  function setTimelineWidth(timelineComponents, width) {\n    var timeSpan = daydiff(timelineComponents['timelineDates'][0], timelineComponents['timelineDates'][timelineComponents['timelineDates'].length - 1]),\n        timeSpanNorm = timeSpan / timelineComponents['eventsMinLapse'],\n        timeSpanNorm = Math.round(timeSpanNorm) + 4,\n        totalWidth = timeSpanNorm * width;\n    timelineComponents['eventsWrapper'].css('width', totalWidth + 'px');\n    updateFilling(timelineComponents['timelineEvents'].eq(0), timelineComponents['fillingLine'], totalWidth);\n    return totalWidth;\n  }\n\n  function updateVisibleContent(event, eventsContent) {\n    var eventDate = event.data('date'),\n        visibleContent = eventsContent.find('.selected'),\n        selectedContent = eventsContent.find('[data-date=\"' + eventDate + '\"]'),\n        selectedContentHeight = selectedContent.height();\n\n    if (selectedContent.index() > visibleContent.index()) {\n      var classEnetering = 'selected enter-right',\n          classLeaving = 'leave-left';\n    } else {\n      var classEnetering = 'selected enter-left',\n          classLeaving = 'leave-right';\n    }\n\n    selectedContent.attr('class', classEnetering);\n    visibleContent.attr('class', classLeaving).one('webkitAnimationEnd oanimationend msAnimationEnd animationend', function () {\n      visibleContent.removeClass('leave-right leave-left');\n      selectedContent.removeClass('enter-left enter-right');\n    });\n    eventsContent.css('height', selectedContentHeight + 'px');\n  }\n\n  function updateOlderEvents(event) {\n    event.parent('li').prevAll('li').children('a').addClass('older-event').end().end().nextAll('li').children('a').removeClass('older-event');\n  }\n\n  function getTranslateValue(timeline) {\n    var timelineStyle = window.getComputedStyle(timeline.get(0), null),\n        timelineTranslate = timelineStyle.getPropertyValue(\"-webkit-transform\") || timelineStyle.getPropertyValue(\"-moz-transform\") || timelineStyle.getPropertyValue(\"-ms-transform\") || timelineStyle.getPropertyValue(\"-o-transform\") || timelineStyle.getPropertyValue(\"transform\");\n\n    if (timelineTranslate.indexOf('(') >= 0) {\n      var timelineTranslate = timelineTranslate.split('(')[1];\n      timelineTranslate = timelineTranslate.split(')')[0];\n      timelineTranslate = timelineTranslate.split(',');\n      var translateValue = timelineTranslate[4];\n    } else {\n      var translateValue = 0;\n    }\n\n    return Number(translateValue);\n  }\n\n  function setTransformValue(element, property, value) {\n    element.style[\"-webkit-transform\"] = property + \"(\" + value + \")\";\n    element.style[\"-moz-transform\"] = property + \"(\" + value + \")\";\n    element.style[\"-ms-transform\"] = property + \"(\" + value + \")\";\n    element.style[\"-o-transform\"] = property + \"(\" + value + \")\";\n    element.style[\"transform\"] = property + \"(\" + value + \")\";\n  } //based on http://stackoverflow.com/questions/542938/how-do-i-get-the-number-of-days-between-two-dates-in-javascript\n\n\n  function parseDate(events) {\n    var dateArrays = [];\n    events.each(function () {\n      var dateComp = $(this).data('date').split('/'),\n          newDate = new Date(dateComp[2], dateComp[1] - 1, dateComp[0]);\n      dateArrays.push(newDate);\n    });\n    return dateArrays;\n  }\n\n  function parseDate2(events) {\n    var dateArrays = [];\n    events.each(function () {\n      var singleDate = $(this),\n          dateComp = singleDate.data('date').split('T');\n\n      if (dateComp.length > 1) {\n        //both DD/MM/YEAR and time are provided\n        var dayComp = dateComp[0].split('/'),\n            timeComp = dateComp[1].split(':');\n      } else if (dateComp[0].indexOf(':') >= 0) {\n        //only time is provide\n        var dayComp = [\"2000\", \"0\", \"0\"],\n            timeComp = dateComp[0].split(':');\n      } else {\n        //only DD/MM/YEAR\n        var dayComp = dateComp[0].split('/'),\n            timeComp = [\"0\", \"0\"];\n      }\n\n      var newDate = new Date(dayComp[2], dayComp[1] - 1, dayComp[0], timeComp[0], timeComp[1]);\n      dateArrays.push(newDate);\n    });\n    return dateArrays;\n  }\n\n  function daydiff(first, second) {\n    return Math.round(second - first);\n  }\n\n  function minLapse(dates) {\n    //determine the minimum distance among events\n    var dateDistances = [];\n\n    for (i = 1; i < dates.length; i++) {\n      var distance = daydiff(dates[i - 1], dates[i]);\n      dateDistances.push(distance);\n    }\n\n    return Math.min.apply(null, dateDistances);\n  }\n  /*\n  \tHow to tell if a DOM element is visible in the current viewport?\n  \thttp://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport\n  */\n\n\n  function elementInViewport(el) {\n    var top = el.offsetTop;\n    var left = el.offsetLeft;\n    var width = el.offsetWidth;\n    var height = el.offsetHeight;\n\n    while (el.offsetParent) {\n      el = el.offsetParent;\n      top += el.offsetTop;\n      left += el.offsetLeft;\n    }\n\n    return top < window.pageYOffset + window.innerHeight && left < window.pageXOffset + window.innerWidth && top + height > window.pageYOffset && left + width > window.pageXOffset;\n  }\n\n  function checkMQ() {\n    //check if mobile or desktop device\n    return window.getComputedStyle(document.querySelector('.cd-horizontal-timeline'), '::before').getPropertyValue('content').replace(/'/g, \"\").replace(/\"/g, \"\");\n  }\n});","map":{"version":3,"sources":["/home/ankit/git/proto-react/src/timeline.js"],"names":["jQuery","document","ready","$","timelines","eventsMinDistance","length","initTimeline","each","timeline","timelineComponents","find","children","parseDate","minLapse","setDatePosition","timelineTotWidth","setTimelineWidth","addClass","on","event","preventDefault","updateSlide","removeClass","updateOlderEvents","updateFilling","updateVisibleContent","mq","checkMQ","showNewContent","keyup","which","elementInViewport","get","string","translateValue","getTranslateValue","wrapperWidth","Number","css","replace","translateTimeline","visibleContent","newContent","next","prev","selectedDate","newEvent","parent","updateTimelinePosition","eventStyle","window","getComputedStyle","eventLeft","getPropertyValue","timelineWidth","timelineTranslate","value","totWidth","eventsWrapper","setTransformValue","selectedEvent","filling","eventWidth","scaleValue","min","i","distance","daydiff","distanceNorm","Math","round","eq","width","timeSpan","timeSpanNorm","totalWidth","eventsContent","eventDate","data","selectedContent","selectedContentHeight","height","index","classEnetering","classLeaving","attr","one","prevAll","end","nextAll","timelineStyle","indexOf","split","element","property","style","events","dateArrays","dateComp","newDate","Date","push","parseDate2","singleDate","dayComp","timeComp","first","second","dates","dateDistances","apply","el","top","offsetTop","left","offsetLeft","offsetWidth","offsetHeight","offsetParent","pageYOffset","innerHeight","pageXOffset","innerWidth","querySelector"],"mappings":"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","sourcesContent":["jQuery(document).ready(function($){\n\tvar timelines = $('.cd-horizontal-timeline'),\n\t\teventsMinDistance = 60;\n\n\t(timelines.length > 0) && initTimeline(timelines);\n\n\tfunction initTimeline(timelines) {\n\t\ttimelines.each(function(){\n\t\t\tvar timeline = $(this),\n\t\t\t\ttimelineComponents = {};\n\t\t\t//cache timeline components \n\t\t\ttimelineComponents['timelineWrapper'] = timeline.find('.events-wrapper');\n\t\t\ttimelineComponents['eventsWrapper'] = timelineComponents['timelineWrapper'].children('.events');\n\t\t\ttimelineComponents['fillingLine'] = timelineComponents['eventsWrapper'].children('.filling-line');\n\t\t\ttimelineComponents['timelineEvents'] = timelineComponents['eventsWrapper'].find('a');\n\t\t\ttimelineComponents['timelineDates'] = parseDate(timelineComponents['timelineEvents']);\n\t\t\ttimelineComponents['eventsMinLapse'] = minLapse(timelineComponents['timelineDates']);\n\t\t\ttimelineComponents['timelineNavigation'] = timeline.find('.cd-timeline-navigation');\n\t\t\ttimelineComponents['eventsContent'] = timeline.children('.events-content');\n\n\t\t\t//assign a left postion to the single events along the timeline\n\t\t\tsetDatePosition(timelineComponents, eventsMinDistance);\n\t\t\t//assign a width to the timeline\n\t\t\tvar timelineTotWidth = setTimelineWidth(timelineComponents, eventsMinDistance);\n\t\t\t//the timeline has been initialize - show it\n\t\t\ttimeline.addClass('loaded');\n\n\t\t\t//detect click on the next arrow\n\t\t\ttimelineComponents['timelineNavigation'].on('click', '.next', function(event){\n\t\t\t\tevent.preventDefault();\n\t\t\t\tupdateSlide(timelineComponents, timelineTotWidth, 'next');\n\t\t\t});\n\t\t\t//detect click on the prev arrow\n\t\t\ttimelineComponents['timelineNavigation'].on('click', '.prev', function(event){\n\t\t\t\tevent.preventDefault();\n\t\t\t\tupdateSlide(timelineComponents, timelineTotWidth, 'prev');\n\t\t\t});\n\t\t\t//detect click on the a single event - show new event content\n\t\t\ttimelineComponents['eventsWrapper'].on('click', 'a', function(event){\n\t\t\t\tevent.preventDefault();\n\t\t\t\ttimelineComponents['timelineEvents'].removeClass('selected');\n\t\t\t\t$(this).addClass('selected');\n\t\t\t\tupdateOlderEvents($(this));\n\t\t\t\tupdateFilling($(this), timelineComponents['fillingLine'], timelineTotWidth);\n\t\t\t\tupdateVisibleContent($(this), timelineComponents['eventsContent']);\n\t\t\t});\n\n\t\t\t//on swipe, show next/prev event content\n\t\t\ttimelineComponents['eventsContent'].on('swipeleft', function(){\n\t\t\t\tvar mq = checkMQ();\n\t\t\t\t( mq == 'mobile' ) && showNewContent(timelineComponents, timelineTotWidth, 'next');\n\t\t\t});\n\t\t\ttimelineComponents['eventsContent'].on('swiperight', function(){\n\t\t\t\tvar mq = checkMQ();\n\t\t\t\t( mq == 'mobile' ) && showNewContent(timelineComponents, timelineTotWidth, 'prev');\n\t\t\t});\n\n\t\t\t//keyboard navigation\n\t\t\t$(document).keyup(function(event){\n\t\t\t\tif(event.which=='37' && elementInViewport(timeline.get(0)) ) {\n\t\t\t\t\tshowNewContent(timelineComponents, timelineTotWidth, 'prev');\n\t\t\t\t} else if( event.which=='39' && elementInViewport(timeline.get(0))) {\n\t\t\t\t\tshowNewContent(timelineComponents, timelineTotWidth, 'next');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction updateSlide(timelineComponents, timelineTotWidth, string) {\n\t\t//retrieve translateX value of timelineComponents['eventsWrapper']\n\t\tvar translateValue = getTranslateValue(timelineComponents['eventsWrapper']),\n\t\t\twrapperWidth = Number(timelineComponents['timelineWrapper'].css('width').replace('px', ''));\n\t\t//translate the timeline to the left('next')/right('prev') \n\t\t(string == 'next') \n\t\t\t? translateTimeline(timelineComponents, translateValue - wrapperWidth + eventsMinDistance, wrapperWidth - timelineTotWidth)\n\t\t\t: translateTimeline(timelineComponents, translateValue + wrapperWidth - eventsMinDistance);\n\t}\n\n\tfunction showNewContent(timelineComponents, timelineTotWidth, string) {\n\t\t//go from one event to the next/previous one\n\t\tvar visibleContent =  timelineComponents['eventsContent'].find('.selected'),\n\t\t\tnewContent = ( string == 'next' ) ? visibleContent.next() : visibleContent.prev();\n\n\t\tif ( newContent.length > 0 ) { //if there's a next/prev event - show it\n\t\t\tvar selectedDate = timelineComponents['eventsWrapper'].find('.selected'),\n\t\t\t\tnewEvent = ( string == 'next' ) ? selectedDate.parent('li').next('li').children('a') : selectedDate.parent('li').prev('li').children('a');\n\t\t\t\n\t\t\tupdateFilling(newEvent, timelineComponents['fillingLine'], timelineTotWidth);\n\t\t\tupdateVisibleContent(newEvent, timelineComponents['eventsContent']);\n\t\t\tnewEvent.addClass('selected');\n\t\t\tselectedDate.removeClass('selected');\n\t\t\tupdateOlderEvents(newEvent);\n\t\t\tupdateTimelinePosition(string, newEvent, timelineComponents, timelineTotWidth);\n\t\t}\n\t}\n\n\tfunction updateTimelinePosition(string, event, timelineComponents, timelineTotWidth) {\n\t\t//translate timeline to the left/right according to the position of the selected event\n\t\tvar eventStyle = window.getComputedStyle(event.get(0), null),\n\t\t\teventLeft = Number(eventStyle.getPropertyValue(\"left\").replace('px', '')),\n\t\t\ttimelineWidth = Number(timelineComponents['timelineWrapper'].css('width').replace('px', '')),\n\t\t\ttimelineTotWidth = Number(timelineComponents['eventsWrapper'].css('width').replace('px', ''));\n\t\tvar timelineTranslate = getTranslateValue(timelineComponents['eventsWrapper']);\n\n        if( (string == 'next' && eventLeft > timelineWidth - timelineTranslate) || (string == 'prev' && eventLeft < - timelineTranslate) ) {\n        \ttranslateTimeline(timelineComponents, - eventLeft + timelineWidth/2, timelineWidth - timelineTotWidth);\n        }\n\t}\n\n\tfunction translateTimeline(timelineComponents, value, totWidth) {\n\t\tvar eventsWrapper = timelineComponents['eventsWrapper'].get(0);\n\t\tvalue = (value > 0) ? 0 : value; //only negative translate value\n\t\tvalue = ( !(typeof totWidth === 'undefined') &&  value < totWidth ) ? totWidth : value; //do not translate more than timeline width\n\t\tsetTransformValue(eventsWrapper, 'translateX', value+'px');\n\t\t//update navigation arrows visibility\n\t\t(value == 0 ) ? timelineComponents['timelineNavigation'].find('.prev').addClass('inactive') : timelineComponents['timelineNavigation'].find('.prev').removeClass('inactive');\n\t\t(value == totWidth ) ? timelineComponents['timelineNavigation'].find('.next').addClass('inactive') : timelineComponents['timelineNavigation'].find('.next').removeClass('inactive');\n\t}\n\n\tfunction updateFilling(selectedEvent, filling, totWidth) {\n\t\t//change .filling-line length according to the selected event\n\t\tvar eventStyle = window.getComputedStyle(selectedEvent.get(0), null),\n\t\t\teventLeft = eventStyle.getPropertyValue(\"left\"),\n\t\t\teventWidth = eventStyle.getPropertyValue(\"width\");\n\t\teventLeft = Number(eventLeft.replace('px', '')) + Number(eventWidth.replace('px', ''))/2;\n\t\tvar scaleValue = eventLeft/totWidth;\n\t\tsetTransformValue(filling.get(0), 'scaleX', scaleValue);\n\t}\n\n\tfunction setDatePosition(timelineComponents, min) {\n\t\tfor (i = 0; i < timelineComponents['timelineDates'].length; i++) { \n\t\t    var distance = daydiff(timelineComponents['timelineDates'][0], timelineComponents['timelineDates'][i]),\n\t\t    \tdistanceNorm = Math.round(distance/timelineComponents['eventsMinLapse']) + 2;\n\t\t    timelineComponents['timelineEvents'].eq(i).css('left', distanceNorm*min+'px');\n\t\t}\n\t}\n\n\tfunction setTimelineWidth(timelineComponents, width) {\n\t\tvar timeSpan = daydiff(timelineComponents['timelineDates'][0], timelineComponents['timelineDates'][timelineComponents['timelineDates'].length-1]),\n\t\t\ttimeSpanNorm = timeSpan/timelineComponents['eventsMinLapse'],\n\t\t\ttimeSpanNorm = Math.round(timeSpanNorm) + 4,\n\t\t\ttotalWidth = timeSpanNorm*width;\n\t\ttimelineComponents['eventsWrapper'].css('width', totalWidth+'px');\n\t\tupdateFilling(timelineComponents['timelineEvents'].eq(0), timelineComponents['fillingLine'], totalWidth);\n\t\n\t\treturn totalWidth;\n\t}\n\n\tfunction updateVisibleContent(event, eventsContent) {\n\t\tvar eventDate = event.data('date'),\n\t\t\tvisibleContent = eventsContent.find('.selected'),\n\t\t\tselectedContent = eventsContent.find('[data-date=\"'+ eventDate +'\"]'),\n\t\t\tselectedContentHeight = selectedContent.height();\n\n\t\tif (selectedContent.index() > visibleContent.index()) {\n\t\t\tvar classEnetering = 'selected enter-right',\n\t\t\t\tclassLeaving = 'leave-left';\n\t\t} else {\n\t\t\tvar classEnetering = 'selected enter-left',\n\t\t\t\tclassLeaving = 'leave-right';\n\t\t}\n\n\t\tselectedContent.attr('class', classEnetering);\n\t\tvisibleContent.attr('class', classLeaving).one('webkitAnimationEnd oanimationend msAnimationEnd animationend', function(){\n\t\t\tvisibleContent.removeClass('leave-right leave-left');\n\t\t\tselectedContent.removeClass('enter-left enter-right');\n\t\t});\n\t\teventsContent.css('height', selectedContentHeight+'px');\n\t}\n\n\tfunction updateOlderEvents(event) {\n\t\tevent.parent('li').prevAll('li').children('a').addClass('older-event').end().end().nextAll('li').children('a').removeClass('older-event');\n\t}\n\n\tfunction getTranslateValue(timeline) {\n\t\tvar timelineStyle = window.getComputedStyle(timeline.get(0), null),\n\t\t\ttimelineTranslate = timelineStyle.getPropertyValue(\"-webkit-transform\") ||\n         \t\ttimelineStyle.getPropertyValue(\"-moz-transform\") ||\n         \t\ttimelineStyle.getPropertyValue(\"-ms-transform\") ||\n         \t\ttimelineStyle.getPropertyValue(\"-o-transform\") ||\n         \t\ttimelineStyle.getPropertyValue(\"transform\");\n\n        if( timelineTranslate.indexOf('(') >=0 ) {\n        \tvar timelineTranslate = timelineTranslate.split('(')[1];\n    \t\ttimelineTranslate = timelineTranslate.split(')')[0];\n    \t\ttimelineTranslate = timelineTranslate.split(',');\n    \t\tvar translateValue = timelineTranslate[4];\n        } else {\n        \tvar translateValue = 0;\n        }\n\n        return Number(translateValue);\n\t}\n\n\tfunction setTransformValue(element, property, value) {\n\t\telement.style[\"-webkit-transform\"] = property+\"(\"+value+\")\";\n\t\telement.style[\"-moz-transform\"] = property+\"(\"+value+\")\";\n\t\telement.style[\"-ms-transform\"] = property+\"(\"+value+\")\";\n\t\telement.style[\"-o-transform\"] = property+\"(\"+value+\")\";\n\t\telement.style[\"transform\"] = property+\"(\"+value+\")\";\n\t}\n\n\t//based on http://stackoverflow.com/questions/542938/how-do-i-get-the-number-of-days-between-two-dates-in-javascript\n\tfunction parseDate(events) {\n\t\tvar dateArrays = [];\n\t\tevents.each(function(){\n\t\t\tvar dateComp = $(this).data('date').split('/'),\n\t\t\t\tnewDate = new Date(dateComp[2], dateComp[1]-1, dateComp[0]);\n\t\t\tdateArrays.push(newDate);\n\t\t});\n\t    return dateArrays;\n\t}\n\n\tfunction parseDate2(events) {\n\t\tvar dateArrays = [];\n\t\tevents.each(function(){\n\t\t\tvar singleDate = $(this),\n\t\t\t\tdateComp = singleDate.data('date').split('T');\n\t\t\tif( dateComp.length > 1 ) { //both DD/MM/YEAR and time are provided\n\t\t\t\tvar dayComp = dateComp[0].split('/'),\n\t\t\t\t\ttimeComp = dateComp[1].split(':');\n\t\t\t} else if( dateComp[0].indexOf(':') >=0 ) { //only time is provide\n\t\t\t\tvar dayComp = [\"2000\", \"0\", \"0\"],\n\t\t\t\t\ttimeComp = dateComp[0].split(':');\n\t\t\t} else { //only DD/MM/YEAR\n\t\t\t\tvar dayComp = dateComp[0].split('/'),\n\t\t\t\t\ttimeComp = [\"0\", \"0\"];\n\t\t\t}\n\t\t\tvar\tnewDate = new Date(dayComp[2], dayComp[1]-1, dayComp[0], timeComp[0], timeComp[1]);\n\t\t\tdateArrays.push(newDate);\n\t\t});\n\t    return dateArrays;\n\t}\n\n\tfunction daydiff(first, second) {\n\t    return Math.round((second-first));\n\t}\n\n\tfunction minLapse(dates) {\n\t\t//determine the minimum distance among events\n\t\tvar dateDistances = [];\n\t\tfor (i = 1; i < dates.length; i++) { \n\t\t    var distance = daydiff(dates[i-1], dates[i]);\n\t\t    dateDistances.push(distance);\n\t\t}\n\t\treturn Math.min.apply(null, dateDistances);\n\t}\n\n\t/*\n\t\tHow to tell if a DOM element is visible in the current viewport?\n\t\thttp://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport\n\t*/\n\tfunction elementInViewport(el) {\n\t\tvar top = el.offsetTop;\n\t\tvar left = el.offsetLeft;\n\t\tvar width = el.offsetWidth;\n\t\tvar height = el.offsetHeight;\n\n\t\twhile(el.offsetParent) {\n\t\t    el = el.offsetParent;\n\t\t    top += el.offsetTop;\n\t\t    left += el.offsetLeft;\n\t\t}\n\n\t\treturn (\n\t\t    top < (window.pageYOffset + window.innerHeight) &&\n\t\t    left < (window.pageXOffset + window.innerWidth) &&\n\t\t    (top + height) > window.pageYOffset &&\n\t\t    (left + width) > window.pageXOffset\n\t\t);\n\t}\n\n\tfunction checkMQ() {\n\t\t//check if mobile or desktop device\n\t\treturn window.getComputedStyle(document.querySelector('.cd-horizontal-timeline'), '::before').getPropertyValue('content').replace(/'/g, \"\").replace(/\"/g, \"\");\n\t}\n});"]},"metadata":{},"sourceType":"module"}